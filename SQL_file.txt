CREATE TABLE IF NOT EXISTS departments (
dep_id SERIAL PRIMARY KEY,
dep_name TEXT NOT NULL,
UNIQUE (dep_name)
);


CREATE TABLE IF NOT EXISTS employees (
emp_id SERIAL PRIMARY KEY,
fio TEXT NOT NULL,
position TEXT NOT NULL,
dep_id INTEGER NOT NULL,
FOREIGN KEY (dep_id) REFERENCES departments (dep_id)
ON DELETE CASCADE);

CREATE TABLE IF NOT EXISTS clients (
client_id SERIAL PRIMARY KEY NOT NULL,
fio TEXT NOT NULL,
email TEXT NOT NULL,
phone_number TEXT NOT NULL,
UNIQUE (email, phone_number),
);


CREATE TABLE IF NOT EXISTS orders (
order_id SERIAL PRIMARY KEY NOT NULL,
created_dt DATE NOT NULL,
updated_dt DATE,
type_order TEXT NOT NULL,
description TEXT,
status TEXT NOT NULL,
serial_number INTEGER NOT NULL,
creator_id INTEGER NOT NULL,
client_id INTEGER NOT NULL,
FOREIGN KEY (creator_id) REFERENCES employees (emp_id) ON DELETE CASCADE,
FOREIGN KEY (client_id) REFERENCES clients (client_id) ON DELETE CASCADE
);
